{"ast":null,"code":"var _jsxFileName = \"/Users/deionstfleur/Desktop/Python Job Scraper/Python-Job-Scraper/frontend/src/Pages/SoldPricesChart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Chart from 'chart.js/auto';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SoldPricesChart = () => {\n  _s();\n  const [soldPricesData, setSoldPricesData] = useState([]);\n  const chartRef = React.useRef(null); // Reference to the Chart instance\n\n  useEffect(() => {\n    const fetchSoldPrices = async () => {\n      try {\n        const response = await axios.get('http://127.0.0.1:5000/api/properties');\n        setSoldPricesData(response.data);\n      } catch (error) {\n        console.error('Failed to fetch sold prices:', error);\n      }\n    };\n    fetchSoldPrices();\n  }, []);\n  useEffect(() => {\n    if (soldPricesData.length > 0) {\n      renderChart();\n    }\n  }, [soldPricesData]);\n  const renderChart = () => {\n    const soldProperties = soldPricesData.filter(property => property.sold_price !== null);\n    const soldPrices = soldProperties.map(property => property.sold_price);\n    const propertyIndices = soldProperties.map((property, index) => index + 1);\n    const ctx = document.getElementById('soldPricesChart2').getContext('2d');\n\n    // Check if a Chart instance already exists\n    if (chartRef.current) {\n      chartRef.current.destroy(); // Destroy the existing Chart instance\n    }\n\n    // Create new Chart instance and store it in the reference\n    chartRef.current = new Chart(ctx, {\n      type: 'line',\n      data: {\n        labels: propertyIndices,\n        datasets: [{\n          label: 'Sold Prices',\n          data: soldPrices,\n          borderColor: 'rgba(75, 192, 192, 1)',\n          borderWidth: 1,\n          fill: false,\n          // Set custom image as point marker\n          pointStyle: function (context) {\n            const property = soldProperties[context.dataIndex];\n            if (property && property.primary_photo) {\n              const imageUrl = property.primary_photo.split('?')[0]; // Remove query parameters\n              return {\n                image: imageUrl,\n                width: 20,\n                height: 20\n              };\n            }\n            return 'circle'; // Default to circle if primary_photo is not available\n          }\n        }]\n      },\n      options: {\n        scales: {\n          yAxes: [{\n            ticks: {\n              beginAtZero: true\n            }\n          }]\n        }\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: \"soldPricesChart2\",\n      width: \"800\",\n      height: \"400\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n};\n_s(SoldPricesChart, \"nrcB7IixzXC5GU3u2WK3Ts1A2Ng=\");\n_c = SoldPricesChart;\nexport default SoldPricesChart;\nvar _c;\n$RefreshReg$(_c, \"SoldPricesChart\");","map":{"version":3,"names":["React","useState","useEffect","axios","Chart","jsxDEV","_jsxDEV","SoldPricesChart","_s","soldPricesData","setSoldPricesData","chartRef","useRef","fetchSoldPrices","response","get","data","error","console","length","renderChart","soldProperties","filter","property","sold_price","soldPrices","map","propertyIndices","index","ctx","document","getElementById","getContext","current","destroy","type","labels","datasets","label","borderColor","borderWidth","fill","pointStyle","context","dataIndex","primary_photo","imageUrl","split","image","width","height","options","scales","yAxes","ticks","beginAtZero","children","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/deionstfleur/Desktop/Python Job Scraper/Python-Job-Scraper/frontend/src/Pages/SoldPricesChart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Chart from 'chart.js/auto';\n\nconst SoldPricesChart = () => {\n    const [soldPricesData, setSoldPricesData] = useState([]);\n    const chartRef = React.useRef(null); // Reference to the Chart instance\n\n    useEffect(() => {\n        const fetchSoldPrices = async () => {\n            try {\n                const response = await axios.get('http://127.0.0.1:5000/api/properties');\n                setSoldPricesData(response.data);\n            } catch (error) {\n                console.error('Failed to fetch sold prices:', error);\n            }\n        };\n\n        fetchSoldPrices();\n    }, []);\n\n    useEffect(() => {\n        if (soldPricesData.length > 0) {\n            renderChart();\n        }\n    }, [soldPricesData]);\n\n    const renderChart = () => {\n        const soldProperties = soldPricesData.filter(property => property.sold_price !== null);\n        const soldPrices = soldProperties.map(property => property.sold_price);\n        const propertyIndices = soldProperties.map((property, index) => index + 1);\n    \n        const ctx = document.getElementById('soldPricesChart2').getContext('2d');\n    \n        // Check if a Chart instance already exists\n        if (chartRef.current) {\n            chartRef.current.destroy(); // Destroy the existing Chart instance\n        }\n    \n        // Create new Chart instance and store it in the reference\n        chartRef.current = new Chart(ctx, {\n            type: 'line',\n            data: {\n                labels: propertyIndices,\n                datasets: [{\n                    label: 'Sold Prices',\n                    data: soldPrices,\n                    borderColor: 'rgba(75, 192, 192, 1)',\n                    borderWidth: 1,\n                    fill: false,\n                    // Set custom image as point marker\n                    pointStyle: function(context) {\n                        const property = soldProperties[context.dataIndex];\n                        if (property && property.primary_photo) {\n                            const imageUrl = property.primary_photo.split('?')[0]; // Remove query parameters\n                            return {\n                                image: imageUrl,\n                                width: 20,\n                                height: 20\n                            };\n                        }\n                        return 'circle'; // Default to circle if primary_photo is not available\n                    }\n                }]\n            },\n            options: {\n                scales: {\n                    yAxes: [{\n                        ticks: {\n                            beginAtZero: true\n                        }\n                    }]\n                }\n            }\n        });\n    };\n\n    return (\n        <div>\n            <canvas id=\"soldPricesChart2\" width=\"800\" height=\"400\"></canvas>\n        </div>\n    );\n};\n\nexport default SoldPricesChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}