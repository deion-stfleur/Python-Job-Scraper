{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import Chart from'chart.js/auto';import{ColorRing}from'react-loader-spinner';import\"../App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const SoldPricesNY=()=>{const[soldPricesData,setSoldPricesData]=useState([]);const chartRef=React.useRef(null);// Reference to the Chart instance\nconst[loading,setLoading]=useState(true);useEffect(()=>{const fetchSoldPrices=async()=>{try{const response=await axios.get('http://127.0.0.1:5000/api/api/ny-properties-for-sale');setSoldPricesData(response.data);setLoading(false);// Set loading to false after data is fetched\n}catch(error){console.error('Failed to fetch sold prices for NY:',error);}};fetchSoldPrices();},[]);useEffect(()=>{if(!loading&&soldPricesData.length>0){renderChart();}},[soldPricesData,loading]);const renderChart=()=>{const soldPrices=soldPricesData.filter(property=>property.sold_price!==null).map(property=>property.sold_price);const propertyIndices=soldPricesData.map((property,index)=>index+1).filter((index,idx)=>soldPricesData[idx].sold_price!==null);const ctx=document.getElementById('soldPricesChartNY').getContext('2d');// Check if a Chart instance already exists\nif(chartRef.current){chartRef.current.destroy();// Destroy the existing Chart instance\n}// Create new Chart instance and store it in the reference\nchartRef.current=new Chart(ctx,{type:'bar',data:{labels:propertyIndices,datasets:[{label:'Boston Properties Sold at this Price',data:soldPrices,borderColor:'rgba(255, 208, 58)',borderWidth:1,fill:false}]},options:{scales:{yAxes:[{ticks:{beginAtZero:true}}]}}});};return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'block',marginTop:40,alignItems:'center',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Loading Chart Data...\"}),/*#__PURE__*/_jsx(ColorRing,{visible:true,height:\"80\",width:\"80\",ariaLabel:\"color-ring-loading\",wrapperStyle:{},wrapperClass:\"color-ring-wrapper\",colors:['#e15b64','#f47e60','#f8b26a','#abbd81','#849b87']})]})})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"canvas\",{id:\"soldPricesChartNY\",width:\"800\",height:\"400\"}),/*#__PURE__*/_jsx(\"p\",{className:\"beantown-title\",children:\"New York City\"})]})});};export default SoldPricesNY;","map":{"version":3,"names":["React","useState","useEffect","axios","Chart","ColorRing","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SoldPricesNY","soldPricesData","setSoldPricesData","chartRef","useRef","loading","setLoading","fetchSoldPrices","response","get","data","error","console","length","renderChart","soldPrices","filter","property","sold_price","map","propertyIndices","index","idx","ctx","document","getElementById","getContext","current","destroy","type","labels","datasets","label","borderColor","borderWidth","fill","options","scales","yAxes","ticks","beginAtZero","children","className","style","display","marginTop","alignItems","textAlign","visible","height","width","ariaLabel","wrapperStyle","wrapperClass","colors","id"],"sources":["/Users/deionstfleur/Desktop/Python Job Scraper/Python-Job-Scraper/frontend/src/Pages/SoldPricesNY.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Chart from 'chart.js/auto';\nimport { ColorRing } from 'react-loader-spinner'\nimport \"../App.css\"\n\n\nconst SoldPricesNY = () => {\n    const [soldPricesData, setSoldPricesData] = useState([]);\n    const chartRef = React.useRef(null); // Reference to the Chart instance\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchSoldPrices = async () => {\n            try {\n                const response = await axios.get('http://127.0.0.1:5000/api/api/ny-properties-for-sale');\n                setSoldPricesData(response.data);\n                setLoading(false); // Set loading to false after data is fetched\n            } catch (error) {\n                console.error('Failed to fetch sold prices for NY:', error);\n            }\n        };\n\n        fetchSoldPrices();\n    }, []);\n\n    useEffect(() => {\n        if (!loading && soldPricesData.length > 0) {\n            renderChart();\n        }\n    }, [soldPricesData, loading]);\n\n    const renderChart = () => {\n        const soldPrices = soldPricesData\n            .filter(property => property.sold_price !== null)\n            .map(property => property.sold_price);\n        const propertyIndices = soldPricesData\n            .map((property, index) => index + 1)\n            .filter((index, idx) => soldPricesData[idx].sold_price !== null);\n\n        const ctx = document.getElementById('soldPricesChartNY').getContext('2d');\n\n        // Check if a Chart instance already exists\n        if (chartRef.current) {\n            chartRef.current.destroy(); // Destroy the existing Chart instance\n        }\n\n        // Create new Chart instance and store it in the reference\n        chartRef.current = new Chart(ctx, {\n            type: 'bar',\n            data: {\n                labels: propertyIndices,\n                datasets: [{\n                    label: 'Boston Properties Sold at this Price',\n                    data: soldPrices,\n                    borderColor: 'rgba(255, 208, 58)',\n                    borderWidth: 1,\n                    fill: false\n                }]\n            },\n            options: {\n                scales: {\n                    yAxes: [{\n                        ticks: {\n                            beginAtZero: true\n                        }\n                    }]\n                }\n            }\n        });\n    };\n\n    return (\n        <div>\n           {loading ? (\n\n            <>\n            <div className='loading-container'>\n\n            <div style={{display: 'block',marginTop: 40, alignItems:'center',textAlign:'center'}}>\n                <p>Loading Chart Data...</p>\n            <ColorRing\n            visible={true}\n            height=\"80\"\n            width=\"80\"\n            ariaLabel=\"color-ring-loading\"\n            wrapperStyle={{}}\n            wrapperClass=\"color-ring-wrapper\"\n            colors={['#e15b64', '#f47e60', '#f8b26a', '#abbd81', '#849b87']}\n            />\n            </div>\n            </div>\n            </>\n            ) : (\n                <>\n                <canvas id=\"soldPricesChartNY\" width=\"800\" height=\"400\"></canvas>\n                <p className='beantown-title'>New York City</p>\n                </>\n            \n            )}\n        </div>\n    );\n};\n\nexport default SoldPricesNY;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}